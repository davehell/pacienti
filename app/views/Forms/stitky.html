#{extends 'main.html' /}
#{set title:'Štítky' /}


#{if pacienti}
<div class="span-18">
  <table class="display" id="pacTable">
    <thead>
      <th>&nbsp;</th>
      <th>&nbsp;</th>
      <th>Evidenční číslo</th>
      <th>Jméno</th>
      <th>Rodné číslo</th>
    </thead>
    <tbody>

    #{list pacienti}
    <tr>
      <td>${_.evCislo} </td>
      <td>${_.evRok} </td>
      <td><a href="" class="evCislo" title="">${_.getKod()}</a></td>
      <td>${_.jmeno} ${_.prijmeni} </td>
      <td>${_.getRodneCislo()} </td>
    </tr>
    #{/list}
    </tbody>
  </table>
</div> <!-- span-15 -->

<div class="span-5 push-1 last">
  <p><strong>Vybrané štítky:</strong></p>
  <p id="neStitky">Nejsou vybrány žádné štítky.</p>
  <ul id="stitky">
  </ul>

  #{form @stitky()}
  <input type="text" name="evCisla" id="evCisla" value="">
  <input type="submit" value="Tisk" id="printButton" style="display: none; margin-left: 0;" />
  #{/form}
</div> <!-- span-9 -->
<script type="text/javascript">
$(document).ready(function() {
    oTable = $('#pacTable').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bStateSave": false,
        "aaSorting": [[ 1, "desc" ],[ 0, "desc" ]],
        "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "Vše"]],
        "iDisplayLength":25,
        "aoColumnDefs": [
            { "bVisible": false, "aTargets": [ 0, 1 ] },
            { "bSearchable": false, "aTargets": [ 0, 1 ] }
        ]
    });

    $("#printButton").hide();

    $('.evCislo').click(function () {
      $("#stitky").append('<li>' + this.innerHTML + '</li>');
      var text = $("#evCisla").val();
      if(text.length > 0) text += ";";
      text += this.innerHTML;
      $("#evCisla").val(text);
      $("#printButton").show();
      $("#neStitky").hide();
      return false;
    } );

} );
</script>
#{/if}
#{else}
    <div class="empty">
        &{'noRecords'}
    </div>
#{/else}

