<!DOCTYPE html>

<html>
  <head>
    <title>Výsledková zpráva molekulárně genetického vyšetření</title>
    <meta charset="${_response_encoding}">
    
    <style>
      body {font-family: "Times New Roman", sans-serif; font-size: 12pt; line-height: 14pt;}
      #page {width: 16.9cm; height: 26cm; border: 0px solid black; position: relative; margin: 0; padding: 0; border: 1px solid white;}
      #logo { position: absolute; top: 0; left: 0;}
      #certif{position: absolute; top: 1.3cm; right: 0;}
      #head { text-align: center; width: 100%; border-bottom: 0.5px solid black; padding-bottom: 5px;}
      #head p {margin: 0;}
      table {border-collapse: collapse;  width: 100%; margin: 0;}
      td {padding: 0; margin: 0;}
      h1,h2 {font-size: 14pt; text-align: center;line-height: 14pt;}
      h2 {width: 90%; }
      h3 {font-size: 12pt; margin-bottom: 5px;}
      h3 + p {margin: 0;}
      .tab { font-style: italic; width: 100%;}
      #gtypTable {font-size: 10pt;  width: auto; margin-top: 10px;}
      td.gtyp { text-align: left; font-weight: bold; padding-right: 0.5cm;}
      td.gres { width: 1.5cm;}
      #gtypTable td{ border: 1px solid black;  padding: 2px 3px;}
      .noItal {font-style: normal;}
@page {
   @bottom-center {
    content: counter(page) " / " counter(pages);
   }
}
    </style>
    
  </head>
  <body>

<div id="page">

<div id="logo">
  <img src="@{'/public/images/lfg_logo.gif'}" height="115px" width="100px">
</div>

<div id="head">
  <p style="font-weight: bold; font-style: italic; font-size: 12pt;">
    Laboratoř forenzní genetiky, spol. s r. o.<br>
    IČO: 255 30 038<br>
    IČZ: 72 862 000
  </p>
  <p style="font-style: italic; font-size: 10pt;">
    Adresa: Tvrdého 2a, 662 99 Brno<br>
    Tel.: 543 185 811<br>
    <span style="font-weight: bold; ">www.lfg-brno.cz</span>
  </p>
</div>

#{if zprava.vysetreni.certif && !zprava.neniCertif}
<div id="certif">
  <img src="@{'/public/images/cert_m8141.gif'}" height="60px" width="60px">
</div>
#{/if}



<h1>Výsledková zpráva molekulárně genetického vyšetření</h1>

<p style="text-align: center; ">
Laboratoř lékařské genetiky <br>
Pracoviště: ${zprava.pacient.modul.adresa}
</p>

<table class="tab">
  <tr>
    <td style="width: 5cm;">Primární vzorek:</td>
    <td style="width: 4cm;">Datum odběru:</td>
    <td style="width: 3cm;"> 
    #{if zprava.bioMaterial.datumOdberu}
      ${zprava.bioMaterial.datumOdberu?.format()}
    #{/if}
    #{else}
      &{'neuvedeno'}
    #{/else}
    </td>
    <td style="width: 4cm;">Čas odběru:</td>
    <td>
    #{if zprava.bioMaterial.datumOdberu}
      ${zprava.bioMaterial.datumOdberu?.format('HH:mm')?.replace("00:00", "neuvedeno")} 
    #{/if}
    #{else}
      &{'neuvedeno'}
    #{/else}
    </td>
  </tr>
  <tr>
    <td>${zprava.bioMaterial.typ} </td>
    <td>Datum přijetí vzorku:</td>
    <td>
    #{if zprava.bioMaterial.datumPrijeti}
      ${zprava.bioMaterial.datumPrijeti?.format()}
    #{/if}
    #{else}
      &{'neuvedeno'}
    #{/else}
    </td>
    <td>Čas přijetí vzorku:</td>
    <td>
    #{if zprava.bioMaterial.datumPrijeti}
      ${zprava.bioMaterial.datumPrijeti?.format('HH:mm')?.replace("00:00", "neuvedeno")}
    #{/if}
    #{else}
      &{'neuvedeno'}
    #{/else}
    </td>
  </tr>
</table>

<h2>
#{if zprava.neniCertif}
  ${zprava.vysetreni.popis.replace("*", "").raw()}
#{/if}
#{else}
  ${zprava.vysetreni.popis.raw()}
#{/else}
</h2>

<table class="tab">
  <tr>
    <td style="width: 4cm;">Jméno a příjmení:</td>
    <td style="width: 6cm;"><strong>${zprava.pacient.toString()} </strong></td>
    <td style="width: 3cm;">Kód vzorku:</td>
    <td>${zprava.pacient.getKod()} </td>
  </tr>
  <tr>
    <td>Rodné číslo:</td>
    <td>${zprava.pacient.getRodneCislo()} </td>
    <td>Číslo dokladu:</td>
    <td>${zprava.pacient.getCDokladu()} </td>
  </tr>
  <tr>
    <td>Pojišťovna:</td>
    <td>${zprava.pacient.pojistovna.cislo} </td>
    <td>Diagnóza:</td>
    <td>${zprava.pacient.diagnoza} </td>
  </tr>
  <tr>
    <td>Žádající lékař:</td>
    <td>${zprava.pacient.lekar?.jmeno} </td>
    <td>&{'lekar.icz'}:</td>
    <td>${zprava.pacient.lekar?.icz} </td>
  </tr>
  <tr>
    <td>Adresa:</td>
    <td colspan="3">${zprava.pacient.lekar?.pracoviste} </td>
  </tr>
</table>

<h3>Zjištěný genotyp:</h3>
<table id="gtypTable">
  #{list items:vyslMap?.keySet(), as:'marker'}
    #{if marker_isFirst}
    <tr>
    #{/if}
    <td class="gtyp">${marker.replace("->", "&rarr;").raw()} </td>
    <td class="gres">${vyslMap.get(marker).replace("mut", "<strong>mut</strong>").replace("del", "<strong>del</strong>").replace("b", "<strong>b</strong>").replace("E4", "<strong>E4</strong>").replace("4G", "<strong>4G</strong>").replace("pozitivní", "<strong>pozitivní</strong>").replace("POZITIVNÍ", "<strong>POZITIVNÍ</strong>").raw()} </td>
    #{if marker_index % zprava.vysetreni.sloupce == 0}
    </tr>
    #{ifnot marker_isLast}
    <tr>
    #{/ifnot}
    #{/if} 
  #{/list}
</table>
#{if zprava.vysetreni.vysvetlivka}
<p style="font-size: 10pt; margin: 0;">
 Vysvětlivky: ${zprava.vysetreni.vysvetlivka.replace("((", "<strong>").replace("))", "</strong>").raw()}
</p>
#{/if}


<h3>Závěr:</h3>
#{if zprava.zavZprava}
<p>
 ${zprava.zavZprava.replace("((", "<strong>").replace("))", "</strong>").replace("beta", "&beta;").replace("-->", "&rarr;").raw()}
</p>
#{/if}

#{if zprava.pacient.verejnaPozn}
<h3>Poznámka:</h3>
<p>
 ${zprava.pacient.verejnaPozn.replace("((", "<strong>").replace("))", "</strong>").replace("beta", "&beta;").replace("-->", "&rarr;").raw()}
</p>
#{/if}

<table class="tab" style="width: auto; position: absolute; bottom: 0;">
  <tr>
    <td>Analýzu provedl:</td>
    <!-- <td>#{if zprava.parafaVysetreni}<span class="noItal">${zprava.parafaVysetreni?.jmeno} </span>, ${zprava.parafaVysetreni?.pozice}#{/if} #{if zprava.analyzuProvedl}<span class="noItal">, ${zprava.analyzuProvedl}</span>#{/if}</td> -->
    <td><span class="noItal">#{if zprava.parafaVysetreni}${zprava.parafaVysetreni?.jmeno}, ${zprava.parafaVysetreni?.pozice}#{/if}#{if zprava.analyzuProvedl}, ${zprava.analyzuProvedl}#{/if} </span></td>
  </tr>
  <tr>
    <td>Analýzu uvolnil:</td>
    <td><span class="noItal">${zprava.analyzuUvolnil} </span></td>
  </tr>
  <tr>
    <td>Vedoucí lékař:</td>
    <td class="noItal">${zprava.vedouciLekar} </td>
  </tr>
  <tr>
    <td>Datum a čas:</td>
    <td class="noItal">${zprava.datumZpravy?.format('dd.MM.yyyy HH:mm')} </td>
  </tr>
#{if zprava.vysetreni.certif && !zprava.neniCertif}
  <tr>
    <td>Vysvětlivky:</td>
    <td><strong>* na výsledkové zprávě označuje akreditované vyšetření</strong></td>
  </tr>
#{/if}
#{if zprava.vysetreni.genomac}
  <tr>
    <td>Vysvětlivky:</td>
    <td><strong>* na výsledkové zprávě označuje akreditované vyšetření</strong></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>*<sup>G<sup> vyšetření provedené v Genomac International, s.r.o<br>(Zdravotnická laboratoř akreditovaná ČIA pod číslem 8279<br>podle ČSN EN ISO 15189)</td>
  </tr>
#{/if}
</table>
</div> <!-- page -->
  </body>
</html>